<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>6 - Vertex Processing 2</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/victor-mono@latest/dist/index.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.css">
    <meta name="description" content="Summarizing key concepts from CS lectures.">
    <meta property="og:title" content="kmbzn">
    <meta property="og:description" content="kmbzn.com">
    <meta property="og:image" content="https://kmbzn.com/images/og-home.png">
    <meta property="og:url" content="https://kmbzn.com">
    <meta property="og:type" content="website">
    
    <link rel="preload" href="/assets/css/0.styles.097f7555.css" as="style"><link rel="preload" href="/assets/js/app.310c4cb0.js" as="script"><link rel="preload" href="/assets/js/18.bb8e1e7a.js" as="script"><link rel="preload" href="/assets/js/2.a3ccddde.js" as="script"><link rel="preload" href="/assets/js/1.93e900e1.js" as="script"><link rel="preload" href="/assets/js/32.5ad841a7.js" as="script"><link rel="preload" href="/assets/js/22.6bbde796.js" as="script"><link rel="prefetch" href="/assets/js/10.6637bfee.js"><link rel="prefetch" href="/assets/js/11.89241896.js"><link rel="prefetch" href="/assets/js/12.1f81aafc.js"><link rel="prefetch" href="/assets/js/13.db5eb42a.js"><link rel="prefetch" href="/assets/js/14.a654c061.js"><link rel="prefetch" href="/assets/js/15.82f66eb5.js"><link rel="prefetch" href="/assets/js/16.41334cbf.js"><link rel="prefetch" href="/assets/js/17.9f4ed163.js"><link rel="prefetch" href="/assets/js/19.6965bf28.js"><link rel="prefetch" href="/assets/js/20.321501ab.js"><link rel="prefetch" href="/assets/js/21.85cd1bb2.js"><link rel="prefetch" href="/assets/js/23.1c6b188d.js"><link rel="prefetch" href="/assets/js/24.bffcbf0e.js"><link rel="prefetch" href="/assets/js/25.bf3894f9.js"><link rel="prefetch" href="/assets/js/26.f69b21dd.js"><link rel="prefetch" href="/assets/js/27.6451fa63.js"><link rel="prefetch" href="/assets/js/28.bc755508.js"><link rel="prefetch" href="/assets/js/29.b47ece12.js"><link rel="prefetch" href="/assets/js/3.7e2f5075.js"><link rel="prefetch" href="/assets/js/30.44fa9bc2.js"><link rel="prefetch" href="/assets/js/31.3f4b63f6.js"><link rel="prefetch" href="/assets/js/33.b5b64d04.js"><link rel="prefetch" href="/assets/js/34.2da64d4c.js"><link rel="prefetch" href="/assets/js/35.646e59d5.js"><link rel="prefetch" href="/assets/js/4.107563ed.js"><link rel="prefetch" href="/assets/js/5.5467bfa0.js"><link rel="prefetch" href="/assets/js/6.e9ea9ee0.js"><link rel="prefetch" href="/assets/js/7.4a5373f5.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.663d6e13.js">
    <link rel="stylesheet" href="/assets/css/0.styles.097f7555.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/kmbzn.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>🖥️ Computer Graphics</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/computer-graphics/1-Course-Intro.html" class="sidebar-link">1-Course-Intro</a></li><li><a href="/computer-graphics/2-Rendering-Basics.html" class="sidebar-link">2-Rendering-Basics</a></li><li><a href="/computer-graphics/3-Transformations-v2.html" class="sidebar-link">3-Transformations-v2</a></li><li><a href="/computer-graphics/4-Affine-Space-Frame_Matrix.html" class="sidebar-link">4-Affine-Space-Frame_Matrix</a></li><li><a href="/computer-graphics/5-Vertex-Processing-1.html" class="sidebar-link">5-Vertex-Processing-1</a></li><li><a href="/computer-graphics/6-Vertex-Processing-2.html" aria-current="page" class="active sidebar-link">6-Vertex-Processing-2</a></li><li><a href="/computer-graphics/7-Hierachical-Modeling-Mesh.html" class="sidebar-link">7-Hierachical-Modeling-Mesh</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_6-vertex-processing-2"><a href="#_6-vertex-processing-2" class="header-anchor">#</a> 6 - Vertex Processing 2</h1> <h2 id="outline"><a href="#outline" class="header-anchor">#</a> Outline</h2> <ul><li><p>Projection Transformation</p> <ul><li>Orthographic Projection</li> <li>Perspective Projection</li></ul></li> <li><p>Viewport Transformation</p></li></ul> <h1 id="projection-transformation"><a href="#projection-transformation" class="header-anchor">#</a> Projection Transformation</h1> <h2 id="projection-transformation-2"><a href="#projection-transformation-2" class="header-anchor">#</a> Projection Transformation</h2> <ul><li>View space → NDC (normalized device coordinate system)로 변환</li> <li>수식:<div class="language- extra-class"><pre class="language-text"><code>p_c = P * p_v
</code></pre></div>여기서
<ul><li><code>p_v</code>: view space 좌표</li> <li><code>P</code>: projection matrix</li> <li><code>p_c</code>: clip space (또는 NDC space) 좌표</li></ul></li></ul> <h2 id="recall-that"><a href="#recall-that" class="header-anchor">#</a> Recall that...</h2> <ul><li><ol><li>객체 배치<br>
→ Modeling transformation</li></ol></li> <li><ol start="2"><li>&quot;카메라&quot; 배치<br>
→ Viewing transformation</li></ol></li> <li><ol start="3"><li><strong>&quot;렌즈&quot; 선택</strong>
→ <strong>Projection transformation</strong></li></ol></li> <li><ol start="4"><li>&quot;스크린&quot;에 출력<br>
→ Viewport transformation</li></ol></li></ul> <h2 id="recall-opengl-clip-space"><a href="#recall-opengl-clip-space" class="header-anchor">#</a> Recall: OpenGL Clip Space</h2> <ul><li>Clip Space에서는 x, y, z 좌표가 -1에서 1까지인 cube 공간 안에 객체를 그릴 수 있음</li> <li>이 공간의 xy 평면이 2D <strong>viewport</strong> 역할을 함</li> <li>이 좌표계는 <strong>normalized device coordinate (NDC)</strong> 라고 불림</li></ul> <h2 id="normalized-device-coordinates-ndc"><a href="#normalized-device-coordinates-ndc" class="header-anchor">#</a> Normalized Device Coordinates (NDC)</h2> <ul><li><p>**Normalized device coordinates (NDC)**는 장치 독립적인 디스플레이 좌표계이다</p> <ul><li>픽셀 크기, 해상도 등이 다른 다양한 디스플레이 장치에서도 프로그램이 동일하게 동작하게 하려면<br> <strong>정규화된 좌표계</strong>가 필요하다</li></ul></li> <li><p>이 좌표계에서의 공간을 <strong>clip space</strong> 또는 <strong>NDC space</strong>라고도 부른다</p> <ul><li>단, clip space와 NDC space는 약간의 차이가 있으므로<br>
이는 이번 강의에서 자세히 다룸</li></ul></li></ul> <h2 id="canonical-view-volume"><a href="#canonical-view-volume" class="header-anchor">#</a> Canonical View Volume</h2> <ul><li><strong>Canonical view volume</strong>은 NDC 공간 내의 3차원 볼륨이며, 화면에 표시될 수 있는 장면의 영역을 정의한다.</li> <li>OpenGL 기준: <code>[-1, 1]^3</code> 범위</li> <li>Direct3D 기준: <code>[0, 1]</code> 범위 (z축만 다름)</li> <li>canonical view volume 안에 있는 객체만 렌더링된다.
<ul><li>카메라 뷰 안에 있는 객체만 그려짐</li> <li>너무 멀거나 너무 가까운 객체는 제외됨</li></ul></li></ul> <h2 id="canonical-view-volume-2"><a href="#canonical-view-volume-2" class="header-anchor">#</a> Canonical View Volume</h2> <ul><li>관례적으로 NDC는 <strong>left-handed</strong> 좌표계임 (OpenGL과 Direct3D 모두)
<ul><li>NDC에서 <strong>+z 방향</strong>이 화면 방향</li></ul></li> <li>OpenGL의 projection 함수는 자동으로 좌표계 손잡이(handedness)를 바꿔줌 → <strong>world/model space는 right-handed</strong> <ul><li>View direction in view space: -z 방향</li> <li>Direct3D는 기본적으로 left-handed system을 사용하나, 이 변경을 하지 않음</li></ul></li></ul> <h2 id="view-volume"><a href="#view-volume" class="header-anchor">#</a> View Volume</h2> <ul><li>View space에서는 객체를 꼭 <code>[-1, 1]</code> 범위 안에 배치할 필요는 없다.</li> <li>대신, 원하는 크기의 직육면체(cuboid)나 frustum 형태의 volume을 설정하고 그 안에 객체를 배치할 수 있다.</li> <li>이 view volume (및 그 안의 모든 객체)은 <strong>canonical view volume in NDC space</strong>로 투영된다.</li></ul> <p>→ <strong>Projection transformation</strong></p> <h2 id="projection-transformation-3"><a href="#projection-transformation-3" class="header-anchor">#</a> Projection Transformation</h2> <ul><li>CG에서의 Projection이란: <strong>3D 좌표를 2D 화면 좌표로 매핑</strong>하는 것</li> <li>수행 순서:
<ul><li>3D 공간상의 arbitrary view volume → canonical view volume으로 매핑<br>
→ <strong>Projection transformation</strong></li> <li>canonical view volume의 z=1 평면에 투영 (실제로 그렇게 되진 않지만, 개념적으로는 깊이(depth)를 따로 유지)</li></ul></li> <li>투영 변환 방식은 크게 2가지:
<ul><li>Orthographic projection</li> <li>Perspective projection</li></ul></li></ul> <h2 id="orthographic-orthogonal-projection"><a href="#orthographic-orthogonal-projection" class="header-anchor">#</a> Orthographic (Orthogonal) Projection</h2> <ul><li>View volume: 직육면체 (cuboid)</li> <li>Orthographic projection: 직육면체 view volume을 canonical view volume로 매핑
<ul><li>Scaling + Translation 조합</li> <li>→ <strong>Windowing transformation</strong></li></ul></li></ul> <h2 id="windowing-transformation"><a href="#windowing-transformation" class="header-anchor">#</a> Windowing Transformation</h2> <ul><li>사각형 공간 내 점 <code>(p_x, p_y)</code>을 다른 사각형 공간의 대응 점 <code>(p_x', p_y')</code>로 매핑하는 변환
<ul><li>예: <code>(x_l, y_l)</code> ~ <code>(x_r, y_r)</code> → <code>(x_l', y_l')</code> ~ <code>(x_r', y_r')</code></li></ul></li></ul> <p>수식:</p> <div class="language- extra-class"><pre class="language-text"><code>p'_x = ((p_x - x_l) / (x_r - x_l)) * (x_r' - x_l') + x_l'
p'_y = ((p_y - y_l) / (y_r - y_l)) * (y_r' - y_l') + y_l'
</code></pre></div><h2 id="orthographic-projection-matrix"><a href="#orthographic-projection-matrix" class="header-anchor">#</a> Orthographic Projection Matrix</h2> <ul><li>3D까지 확장하고, 다음과 같이 대입:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>x_r = right, x_l = left
y_t = top, y_b = bottom
z_f = far, z_n = near

P_orth = 
| 2/(x_r - x_l)   0               0              -(x_r + x_l)/(x_r - x_l) |
| 0              2/(y_t - y_b)   0              -(y_t + y_b)/(y_t - y_b) |
| 0              0              -2/(z_f - z_n)  -(z_f + z_n)/(z_f - z_n) |
| 0              0               0               1                       |
</code></pre></div><h2 id="examples-of-orthographic-projection"><a href="#examples-of-orthographic-projection" class="header-anchor">#</a> Examples of Orthographic Projection</h2> <ul><li>Orthographic 및 등각(isometric) 투영 예시</li> <li><strong>객체는 카메라로부터의 거리와 무관하게 항상 동일한 크기로 보임</strong></li></ul> <h2 id="properties-of-orthographic-projection"><a href="#properties-of-orthographic-projection" class="header-anchor">#</a> Properties of Orthographic Projection</h2> <ul><li>사실적으로 보이지 않음</li> <li><strong>정확한 측정</strong>에 적합</li> <li>CAD, 건축 도면 등에서 가장 일반적으로 사용됨
<ul><li>정확한 측정이 중요한 환경</li></ul></li> <li>Scaling과 Translation의 조합<br>
→ <strong>Affine transformation</strong></li></ul> <h2 id="demo-orthographic-projection"><a href="#demo-orthographic-projection" class="header-anchor">#</a> [Demo] Orthographic Projection</h2> <ul><li>슬라이더를 움직이며 왼쪽(view volume)과 오른쪽(rendered view)을 관찰</li> <li>왼쪽, 오른쪽, 아래, 위, 가까움, 멀리 위치를 조절 가능</li></ul> <h2 id="quiz-1"><a href="#quiz-1" class="header-anchor">#</a> Quiz 1</h2> <h2 id="perspective-effects"><a href="#perspective-effects" class="header-anchor">#</a> Perspective Effects</h2> <ul><li>멀리 있는 객체는 작게 보임</li></ul> <p><strong>Vanishing point</strong>:</p> <ul><li>투시 그림법에서 <strong>평행선이 수렴해 보이는 점</strong></li> <li>평면 투시에서 원근감을 부여하는 핵심 요소</li></ul> <h2 id="perspective-projection"><a href="#perspective-projection" class="header-anchor">#</a> Perspective Projection</h2> <ul><li><p>View volume: <strong>Frustum (절두체)</strong>
→ &quot;Viewing frustum&quot;</p></li> <li><p>Perspective projection: Viewing frustum을 canonical view volume로 매핑</p></li> <li><p>정점들을 canonical view volume로 비선형적으로 매핑
→ 깊이에 따른 왜곡 효과 생성</p></li></ul> <h2 id="why-does-this-mapping-generate-a-perspective-effect"><a href="#why-does-this-mapping-generate-a-perspective-effect" class="header-anchor">#</a> Why does this mapping generate a perspective effect?</h2> <ul><li>원래 3D 장면에서 카메라 기준으로 멀어질수록 z값 증가</li> <li>canonical 공간으로 투영할 때 z에 따라 비선형적으로 축소됨</li> <li><strong>가까운 객체는 크게, 먼 객체는 작게</strong> 투영됨<br>
→ 이것이 perspective 효과의 본질</li></ul> <h2 id="an-example-of-perspective-projection"><a href="#an-example-of-perspective-projection" class="header-anchor">#</a> An Example of Perspective Projection</h2> <p><strong>After perspective projection</strong></p> <ul><li>Frustum 내에 있는 객체들이 canonical 공간에 비선형적으로 압축됨</li> <li>카메라에 가까운 객체는 더 크게, 멀리 있는 객체는 더 작게 보임</li></ul> <h2 id="an-example-of-perspective-projection-2"><a href="#an-example-of-perspective-projection-2" class="header-anchor">#</a> An Example of Perspective Projection</h2> <ul><li>Canonical 공간의 결과를 2D 화면에 표시</li> <li>수평 방향: 1024px</li> <li>수직 방향: 768px</li> <li>카메라의 viewport 내에 객체들이 깊이에 따라 달리 표현됨</li></ul> <h2 id="let-s-first-consider-3d-view-frustum-→-2d-projection-plane"><a href="#let-s-first-consider-3d-view-frustum-→-2d-projection-plane" class="header-anchor">#</a> Let's first consider 3D View Frustum → 2D Projection Plane</h2> <ul><li>3D 점을 카메라 평면에 투영하는 과정을 고려해보자</li></ul> <h2 id="perspective-projection-2"><a href="#perspective-projection-2" class="header-anchor">#</a> Perspective projection</h2> <ul><li><p>화면 위의 객체 크기는 <strong>카메라로부터의 거리</strong>에 반비례함</p></li> <li><p>유사한 삼각형의 성질:</p> <div class="language- extra-class"><pre class="language-text"><code>y' / d = y / -z
⇒ y' = -d·y / z
</code></pre></div></li></ul> <h2 id="homogeneous-coordinates-revisited"><a href="#homogeneous-coordinates-revisited" class="header-anchor">#</a> Homogeneous coordinates revisited</h2> <ul><li>Perspective는 나눗셈 연산이 필요함
<ul><li>이는 <strong>Affine transformation에는 포함되지 않음</strong></li></ul></li> <li>Affine에서는 평행선이 평행하게 유지됨
<ul><li>따라서 소실점 없음</li> <li>뷰포인트로 수렴하는 광선도 없음</li></ul></li> <li><strong>Homogeneous coordinates의 본래 목적은 투영 구현</strong>에 있음</li></ul> <h2 id="homogeneous-coordinates-revisited-2"><a href="#homogeneous-coordinates-revisited-2" class="header-anchor">#</a> Homogeneous coordinates revisited</h2> <ul><li><code>w = 1</code> 좌표를 자리 표시자로 도입
<ul><li>translation을 선형 변환과 통합하는 데 편리</li></ul></li> <li>임의의 w도 허용 가능:<div class="language- extra-class"><pre class="language-text"><code>[x  ]      [kx  ]
[y  ]  ~   [ky  ]
[z  ]      [kz  ]
[w  ]      [kw  ]
</code></pre></div><ul><li>4D 벡터의 <strong>스칼라 배수는 동일한 좌표로 간주</strong></li></ul></li></ul> <h2 id="perspective-projection-3"><a href="#perspective-projection-3" class="header-anchor">#</a> Perspective projection</h2> <ul><li><p>투영 평면에 투영하려면, z를 w로 옮겨서 다음과 같이 변환:</p> <div class="language- extra-class"><pre class="language-text"><code>[x']   = [-d·x/z]     [dz  0   0   0 ]   [x]
[y']     [-d·y/z]  =  [0  dz   0   0 ] * [y]
[ 1 ]     [   1 ]     [0   0   0  -1 ]   [z]
                       [0   0   1   0 ]   [1]
</code></pre></div></li></ul> <h2 id="so-far-3d-→-2d"><a href="#so-far-3d-→-2d" class="header-anchor">#</a> So far, 3D → 2D</h2> <ul><li>지금까지는 단지<br> <strong>3D View Frustum → 2D Projection Plane</strong><br>
로의 투영 이야기였음</li></ul> <h2 id="now-3d-→-3d"><a href="#now-3d-→-3d" class="header-anchor">#</a> Now, 3D → 3D</h2> <ul><li><p>그러나 실제로 우리가 구현해야 하는 것은<br> <strong>3D View Frustum → 3D Canonical View Volume</strong></p></li> <li><p>즉, 원근 투영 이후에도 (x', y', z') 좌표는 유지되어야 함<br>
→ clip space의 깊이 정보가 필요</p></li></ul> <h2 id="first-3d-view-frustum-→-3d-cuboid"><a href="#first-3d-view-frustum-→-3d-cuboid" class="header-anchor">#</a> First, 3D View Frustum → 3D Cuboid</h2> <ul><li><p>우선은 canonical volume이 아닌, near/far 평면이 같은 위치의 cuboid를 고려</p></li> <li><p>x, y 좌표에 대해 이전 슬라이드와 같은 방식으로 투영 가능:</p> <div class="language- extra-class"><pre class="language-text"><code>y' = -d·y / z
x' = -d·x / z
</code></pre></div></li> <li><p>near/far offset이 동일한 cuboid를 고려</p></li> <li><p>문제는 z 좌표:</p> <ul><li>깊이 z는 보존되지 않음 (z가 나눗셈 연산 포함 → 비선형)</li> <li>해결: z 값을 적절히 매핑하여 near/far 평면의 깊이 정보를 유지</li></ul></li></ul> <h2 id="_3d-view-frustum-→-3d-cuboid"><a href="#_3d-view-frustum-→-3d-cuboid" class="header-anchor">#</a> 3D View Frustum → 3D Cuboid</h2> <ul><li><p>z 값까지 포함하여 전체를 행렬로 표현:</p> <div class="language- extra-class"><pre class="language-text"><code>[x']   = [-dx/z]       [dz  0   0   0 ]   [x]
[y']     [-dy/z]   =   [0  dz   0   0 ] * [y]
[z']     [-X/z ]       [0   0   a   b ]   [z]
[ 1 ]     [  1 ]       [0   0  -1   0 ]   [1]
</code></pre></div></li> <li><p>x, y에는 영향 없음 → z'는 x, y와 무관</p> <ul><li>따라서 c₀ = c₁ = 0</li></ul></li> <li><p>원하는 조건:</p> <ul><li>z'(-n) = n</li> <li>z'(-f) = f</li></ul></li> <li><p>선형식으로 z' 정의: <code>z'(z) = (a·z + b) / -z</code></p></li> <li><p>두 개의 미지수 a, b를 두 조건에 대입해 해 구함</p> <ul><li>해: <code>a = fn</code>, <code>b = f + n</code></li></ul></li></ul> <h2 id="final-3d-view-frustum-→-3d-canonical-view-volume"><a href="#final-3d-view-frustum-→-3d-canonical-view-volume" class="header-anchor">#</a> Final: 3D View Frustum → 3D Canonical View Volume</h2> <ul><li><code>P_pers = P_orth · P_dc</code></li> <li>P_dc 행렬 (near, far 반영):<div class="language- extra-class"><pre class="language-text"><code>[n   0   0   0]
[0   n   0   0]
[0   0  f+n fn]
[0   0  -1   0]
</code></pre></div></li> <li>frustum → cuboid → canonical volume 으로 변환</li></ul> <h2 id="perspective-projection-matrix"><a href="#perspective-projection-matrix" class="header-anchor">#</a> Perspective Projection Matrix</h2> <ul><li><p>최종 perspective projection 행렬:</p> <div class="language- extra-class"><pre class="language-text"><code>P_pers = P_orth · P_dc =

[n/r  0     0         0   ]
[0    n/t   0         0   ]
[0    0   (f+n)/(n-f) fnf/(n-f)]
[0    0    -1         0   ]
</code></pre></div></li></ul> <h2 id="note-on-mapped-depth-z-value"><a href="#note-on-mapped-depth-z-value" class="header-anchor">#</a> Note on Mapped Depth (Z' value)</h2> <ul><li>Perspective projection은 깊이 z 값을 (-1, +1) 범위로 <strong>비선형 매핑</strong></li> <li>결과:
<ul><li>카메라 가까이의 z 값일수록 정밀도가 높음</li> <li>멀수록 정밀도가 낮아짐</li></ul></li> <li>그래프:
<ul><li>X축: z 값 (원래 깊이)</li> <li>Y축: 매핑된 z' 값</li></ul></li></ul> <h2 id="perspective-division-clip-ndc-space"><a href="#perspective-division-clip-ndc-space" class="header-anchor">#</a> Perspective Division, Clip / NDC Space</h2> <ul><li>clip space: shader 이후 장면 표현 (4D homogeneous)</li> <li>NDC space: perspective division 이후의 3D 좌표계
<ul><li>w로 나눠서 [x/w, y/w, z/w] 형태로 변환됨</li></ul></li> <li>실제 표현되는 범위: [-1, 1]</li></ul> <h2 id="demo-perspective-projection-frustum"><a href="#demo-perspective-projection-frustum" class="header-anchor">#</a> [Demo] Perspective Projection - frustum</h2> <ul><li>웹 데모: https://learnwebgl.brown37.net/08_projections/create_frustum/create_frustum.html</li> <li>슬라이더로 left, right, top, near, far 값을 조절하며 변화 확인</li></ul> <h2 id="demo-perspective-projection-perspective"><a href="#demo-perspective-projection-perspective" class="header-anchor">#</a> [Demo] Perspective Projection - perspective</h2> <ul><li>웹 데모: https://learnwebgl.brown37.net/08_projections/create_perspective/create_perspective.html</li> <li>슬라이더를 이용해 <code>fovy</code>, <code>aspect</code>, <code>near</code>, <code>far</code> 조절</li> <li><strong>frustum</strong>과 <strong>perspective</strong> 중 어떤 것이 더 편리한가?</li></ul> <h2 id="quiz-2"><a href="#quiz-2" class="header-anchor">#</a> Quiz 2</h2> <h1 id="viewport-transformation"><a href="#viewport-transformation" class="header-anchor">#</a> Viewport Transformation</h1> <h2 id="viewport-transformation-2"><a href="#viewport-transformation-2" class="header-anchor">#</a> Viewport Transformation</h2> <ul><li>Viewport transformation은 NDC 공간에서 화면 공간(screen space)으로 변환</li> <li>마지막 단계의 변환: clip space → screen space</li> <li>좌표계 범위:
<ul><li>NDC: (-1, -1, -1) ~ (1, 1, 1)</li> <li>Screen: (0, 0, 0) ~ (width, height, 1)</li></ul></li></ul> <h2 id="recall-that-2"><a href="#recall-that-2" class="header-anchor">#</a> Recall that...</h2> <ul><li><ol><li>객체 배치
→ Modeling transformation</li></ol></li> <li><ol start="2"><li>카메라 배치
→ Viewing transformation</li></ol></li> <li><ol start="3"><li>렌즈 설정
→ Projection transformation</li></ol></li> <li><ol start="4"><li><strong>&quot;스크린에 출력&quot;</strong>
→ <strong>Viewport transformation</strong></li></ol></li></ul> <h2 id="viewport-transformation-3"><a href="#viewport-transformation-3" class="header-anchor">#</a> Viewport Transformation</h2> <ul><li>Canonical view volume (NDC)에서 z방향 +를 기준으로 내려다본다고 가정</li> <li>Viewport는 screen 상의 사각형 영역</li> <li>Viewport transformation도 결국 <strong>windowing transformation</strong>의 일종</li> <li>깊이 값(z)은 [0, 1] 범위로 재매핑됨 (default depth buffer)</li></ul> <h2 id="viewport-transformation-matrix"><a href="#viewport-transformation-matrix" class="header-anchor">#</a> Viewport Transformation Matrix</h2> <ul><li>windowing transformation matrix에서,
<ul><li><code>x_p, x_l, x_h ...</code> 대신 viewport 변수 대입</li></ul></li> <li>변환 행렬:<div class="language- extra-class"><pre class="language-text"><code>T_vp =
[ width/2     0          0    width/2 + x_min ]
[   0       height/2     0    height/2 + y_min]
[   0          0       1/2         1/2       ]
[   0          0         0           1       ]
</code></pre></div></li> <li><code>(x_min, y_min)</code>부터 시작하여 <code>(width, height)</code> 크기 화면 좌표로 이동</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/computer-graphics/5-Vertex-Processing-1.html" class="prev">
        5-Vertex-Processing-1
      </a></span> <span class="next"><a href="/computer-graphics/7-Hierachical-Modeling-Mesh.html">
        7-Hierachical-Modeling-Mesh
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.310c4cb0.js" defer></script><script src="/assets/js/18.bb8e1e7a.js" defer></script><script src="/assets/js/2.a3ccddde.js" defer></script><script src="/assets/js/1.93e900e1.js" defer></script><script src="/assets/js/32.5ad841a7.js" defer></script><script src="/assets/js/22.6bbde796.js" defer></script>
  </body>
</html>
