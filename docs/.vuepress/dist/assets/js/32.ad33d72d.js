(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{352:function(t,e,r){"use strict";r.r(e);var a=r(30),i=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_6-vertex-processing-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-vertex-processing-2"}},[t._v("#")]),t._v(" 6 - Vertex Processing 2")]),t._v(" "),e("h2",{attrs:{id:"outline"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#outline"}},[t._v("#")]),t._v(" Outline")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Projection Transformation")]),t._v(" "),e("ul",[e("li",[t._v("Orthographic Projection")]),t._v(" "),e("li",[t._v("Perspective Projection")])])]),t._v(" "),e("li",[e("p",[t._v("Viewport Transformation")])])]),t._v(" "),e("h1",{attrs:{id:"projection-transformation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#projection-transformation"}},[t._v("#")]),t._v(" Projection Transformation")]),t._v(" "),e("h2",{attrs:{id:"projection-transformation-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#projection-transformation-2"}},[t._v("#")]),t._v(" Projection Transformation")]),t._v(" "),e("ul",[e("li",[t._v("View space → NDC (normalized device coordinate system)로 변환")]),t._v(" "),e("li",[t._v("수식:"),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("p_c = P * p_v\n")])])]),t._v("여기서\n"),e("ul",[e("li",[e("code",[t._v("p_v")]),t._v(": view space 좌표")]),t._v(" "),e("li",[e("code",[t._v("P")]),t._v(": projection matrix")]),t._v(" "),e("li",[e("code",[t._v("p_c")]),t._v(": clip space (또는 NDC space) 좌표")])])])]),t._v(" "),e("h2",{attrs:{id:"recall-that"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#recall-that"}},[t._v("#")]),t._v(" Recall that...")]),t._v(" "),e("ul",[e("li",[e("ol",[e("li",[t._v("객체 배치"),e("br"),t._v("\n→ Modeling transformation")])])]),t._v(" "),e("li",[e("ol",{attrs:{start:"2"}},[e("li",[t._v('"카메라" 배치'),e("br"),t._v("\n→ Viewing transformation")])])]),t._v(" "),e("li",[e("ol",{attrs:{start:"3"}},[e("li",[e("strong",[t._v('"렌즈" 선택')]),t._v("\n→ "),e("strong",[t._v("Projection transformation")])])])]),t._v(" "),e("li",[e("ol",{attrs:{start:"4"}},[e("li",[t._v('"스크린"에 출력'),e("br"),t._v("\n→ Viewport transformation")])])])]),t._v(" "),e("h2",{attrs:{id:"recall-opengl-clip-space"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#recall-opengl-clip-space"}},[t._v("#")]),t._v(" Recall: OpenGL Clip Space")]),t._v(" "),e("ul",[e("li",[t._v("Clip Space에서는 x, y, z 좌표가 -1에서 1까지인 cube 공간 안에 객체를 그릴 수 있음")]),t._v(" "),e("li",[t._v("이 공간의 xy 평면이 2D "),e("strong",[t._v("viewport")]),t._v(" 역할을 함")]),t._v(" "),e("li",[t._v("이 좌표계는 "),e("strong",[t._v("normalized device coordinate (NDC)")]),t._v(" 라고 불림")])]),t._v(" "),e("h2",{attrs:{id:"normalized-device-coordinates-ndc"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#normalized-device-coordinates-ndc"}},[t._v("#")]),t._v(" Normalized Device Coordinates (NDC)")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("**Normalized device coordinates (NDC)**는 장치 독립적인 디스플레이 좌표계이다")]),t._v(" "),e("ul",[e("li",[t._v("픽셀 크기, 해상도 등이 다른 다양한 디스플레이 장치에서도 프로그램이 동일하게 동작하게 하려면"),e("br"),t._v(" "),e("strong",[t._v("정규화된 좌표계")]),t._v("가 필요하다")])])]),t._v(" "),e("li",[e("p",[t._v("이 좌표계에서의 공간을 "),e("strong",[t._v("clip space")]),t._v(" 또는 "),e("strong",[t._v("NDC space")]),t._v("라고도 부른다")]),t._v(" "),e("ul",[e("li",[t._v("단, clip space와 NDC space는 약간의 차이가 있으므로"),e("br"),t._v("\n이는 이번 강의에서 자세히 다룸")])])])]),t._v(" "),e("h2",{attrs:{id:"canonical-view-volume"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#canonical-view-volume"}},[t._v("#")]),t._v(" Canonical View Volume")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Canonical view volume")]),t._v("은 NDC 공간 내의 3차원 볼륨이며, 화면에 표시될 수 있는 장면의 영역을 정의한다.")]),t._v(" "),e("li",[t._v("OpenGL 기준: "),e("code",[t._v("[-1, 1]^3")]),t._v(" 범위")]),t._v(" "),e("li",[t._v("Direct3D 기준: "),e("code",[t._v("[0, 1]")]),t._v(" 범위 (z축만 다름)")]),t._v(" "),e("li",[t._v("canonical view volume 안에 있는 객체만 렌더링된다.\n"),e("ul",[e("li",[t._v("카메라 뷰 안에 있는 객체만 그려짐")]),t._v(" "),e("li",[t._v("너무 멀거나 너무 가까운 객체는 제외됨")])])])]),t._v(" "),e("h2",{attrs:{id:"canonical-view-volume-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#canonical-view-volume-2"}},[t._v("#")]),t._v(" Canonical View Volume")]),t._v(" "),e("ul",[e("li",[t._v("관례적으로 NDC는 "),e("strong",[t._v("left-handed")]),t._v(" 좌표계임 (OpenGL과 Direct3D 모두)\n"),e("ul",[e("li",[t._v("NDC에서 "),e("strong",[t._v("+z 방향")]),t._v("이 화면 방향")])])]),t._v(" "),e("li",[t._v("OpenGL의 projection 함수는 자동으로 좌표계 손잡이(handedness)를 바꿔줌 → "),e("strong",[t._v("world/model space는 right-handed")]),t._v(" "),e("ul",[e("li",[t._v("View direction in view space: -z 방향")]),t._v(" "),e("li",[t._v("Direct3D는 기본적으로 left-handed system을 사용하나, 이 변경을 하지 않음")])])])]),t._v(" "),e("h2",{attrs:{id:"view-volume"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#view-volume"}},[t._v("#")]),t._v(" View Volume")]),t._v(" "),e("ul",[e("li",[t._v("View space에서는 객체를 꼭 "),e("code",[t._v("[-1, 1]")]),t._v(" 범위 안에 배치할 필요는 없다.")]),t._v(" "),e("li",[t._v("대신, 원하는 크기의 직육면체(cuboid)나 frustum 형태의 volume을 설정하고 그 안에 객체를 배치할 수 있다.")]),t._v(" "),e("li",[t._v("이 view volume (및 그 안의 모든 객체)은 "),e("strong",[t._v("canonical view volume in NDC space")]),t._v("로 투영된다.")])]),t._v(" "),e("p",[t._v("→ "),e("strong",[t._v("Projection transformation")])]),t._v(" "),e("h2",{attrs:{id:"projection-transformation-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#projection-transformation-3"}},[t._v("#")]),t._v(" Projection Transformation")]),t._v(" "),e("ul",[e("li",[t._v("CG에서의 Projection이란: "),e("strong",[t._v("3D 좌표를 2D 화면 좌표로 매핑")]),t._v("하는 것")]),t._v(" "),e("li",[t._v("수행 순서:\n"),e("ul",[e("li",[t._v("3D 공간상의 arbitrary view volume → canonical view volume으로 매핑"),e("br"),t._v("\n→ "),e("strong",[t._v("Projection transformation")])]),t._v(" "),e("li",[t._v("canonical view volume의 z=1 평면에 투영 (실제로 그렇게 되진 않지만, 개념적으로는 깊이(depth)를 따로 유지)")])])]),t._v(" "),e("li",[t._v("투영 변환 방식은 크게 2가지:\n"),e("ul",[e("li",[t._v("Orthographic projection")]),t._v(" "),e("li",[t._v("Perspective projection")])])])]),t._v(" "),e("h2",{attrs:{id:"orthographic-orthogonal-projection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#orthographic-orthogonal-projection"}},[t._v("#")]),t._v(" Orthographic (Orthogonal) Projection")]),t._v(" "),e("ul",[e("li",[t._v("View volume: 직육면체 (cuboid)")]),t._v(" "),e("li",[t._v("Orthographic projection: 직육면체 view volume을 canonical view volume로 매핑\n"),e("ul",[e("li",[t._v("Scaling + Translation 조합")]),t._v(" "),e("li",[t._v("→ "),e("strong",[t._v("Windowing transformation")])])])])]),t._v(" "),e("h2",{attrs:{id:"windowing-transformation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#windowing-transformation"}},[t._v("#")]),t._v(" Windowing Transformation")]),t._v(" "),e("ul",[e("li",[t._v("사각형 공간 내 점 "),e("code",[t._v("(p_x, p_y)")]),t._v("을 다른 사각형 공간의 대응 점 "),e("code",[t._v("(p_x', p_y')")]),t._v("로 매핑하는 변환\n"),e("ul",[e("li",[t._v("예: "),e("code",[t._v("(x_l, y_l)")]),t._v(" ~ "),e("code",[t._v("(x_r, y_r)")]),t._v(" → "),e("code",[t._v("(x_l', y_l')")]),t._v(" ~ "),e("code",[t._v("(x_r', y_r')")])])])])]),t._v(" "),e("p",[t._v("수식:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("p'_x = ((p_x - x_l) / (x_r - x_l)) * (x_r' - x_l') + x_l'\np'_y = ((p_y - y_l) / (y_r - y_l)) * (y_r' - y_l') + y_l'\n")])])]),e("h2",{attrs:{id:"orthographic-projection-matrix"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#orthographic-projection-matrix"}},[t._v("#")]),t._v(" Orthographic Projection Matrix")]),t._v(" "),e("ul",[e("li",[t._v("3D까지 확장하고, 다음과 같이 대입:")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("x_r = right, x_l = left\ny_t = top, y_b = bottom\nz_f = far, z_n = near\n\nP_orth = \n| 2/(x_r - x_l)   0               0              -(x_r + x_l)/(x_r - x_l) |\n| 0              2/(y_t - y_b)   0              -(y_t + y_b)/(y_t - y_b) |\n| 0              0              -2/(z_f - z_n)  -(z_f + z_n)/(z_f - z_n) |\n| 0              0               0               1                       |\n")])])]),e("h2",{attrs:{id:"examples-of-orthographic-projection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#examples-of-orthographic-projection"}},[t._v("#")]),t._v(" Examples of Orthographic Projection")]),t._v(" "),e("ul",[e("li",[t._v("Orthographic 및 등각(isometric) 투영 예시")]),t._v(" "),e("li",[e("strong",[t._v("객체는 카메라로부터의 거리와 무관하게 항상 동일한 크기로 보임")])])]),t._v(" "),e("h2",{attrs:{id:"properties-of-orthographic-projection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#properties-of-orthographic-projection"}},[t._v("#")]),t._v(" Properties of Orthographic Projection")]),t._v(" "),e("ul",[e("li",[t._v("사실적으로 보이지 않음")]),t._v(" "),e("li",[e("strong",[t._v("정확한 측정")]),t._v("에 적합")]),t._v(" "),e("li",[t._v("CAD, 건축 도면 등에서 가장 일반적으로 사용됨\n"),e("ul",[e("li",[t._v("정확한 측정이 중요한 환경")])])]),t._v(" "),e("li",[t._v("Scaling과 Translation의 조합"),e("br"),t._v("\n→ "),e("strong",[t._v("Affine transformation")])])]),t._v(" "),e("h2",{attrs:{id:"demo-orthographic-projection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#demo-orthographic-projection"}},[t._v("#")]),t._v(" [Demo] Orthographic Projection")]),t._v(" "),e("ul",[e("li",[t._v("슬라이더를 움직이며 왼쪽(view volume)과 오른쪽(rendered view)을 관찰")]),t._v(" "),e("li",[t._v("왼쪽, 오른쪽, 아래, 위, 가까움, 멀리 위치를 조절 가능")])]),t._v(" "),e("h2",{attrs:{id:"quiz-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#quiz-1"}},[t._v("#")]),t._v(" Quiz 1")]),t._v(" "),e("h2",{attrs:{id:"perspective-effects"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#perspective-effects"}},[t._v("#")]),t._v(" Perspective Effects")]),t._v(" "),e("ul",[e("li",[t._v("멀리 있는 객체는 작게 보임")])]),t._v(" "),e("p",[e("strong",[t._v("Vanishing point")]),t._v(":")]),t._v(" "),e("ul",[e("li",[t._v("투시 그림법에서 "),e("strong",[t._v("평행선이 수렴해 보이는 점")])]),t._v(" "),e("li",[t._v("평면 투시에서 원근감을 부여하는 핵심 요소")])]),t._v(" "),e("h2",{attrs:{id:"perspective-projection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#perspective-projection"}},[t._v("#")]),t._v(" Perspective Projection")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("View volume: "),e("strong",[t._v("Frustum (절두체)")]),t._v('\n→ "Viewing frustum"')])]),t._v(" "),e("li",[e("p",[t._v("Perspective projection: Viewing frustum을 canonical view volume로 매핑")])]),t._v(" "),e("li",[e("p",[t._v("정점들을 canonical view volume로 비선형적으로 매핑\n→ 깊이에 따른 왜곡 효과 생성")])])]),t._v(" "),e("h2",{attrs:{id:"why-does-this-mapping-generate-a-perspective-effect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#why-does-this-mapping-generate-a-perspective-effect"}},[t._v("#")]),t._v(" Why does this mapping generate a perspective effect?")]),t._v(" "),e("ul",[e("li",[t._v("원래 3D 장면에서 카메라 기준으로 멀어질수록 z값 증가")]),t._v(" "),e("li",[t._v("canonical 공간으로 투영할 때 z에 따라 비선형적으로 축소됨")]),t._v(" "),e("li",[e("strong",[t._v("가까운 객체는 크게, 먼 객체는 작게")]),t._v(" 투영됨"),e("br"),t._v("\n→ 이것이 perspective 효과의 본질")])]),t._v(" "),e("h2",{attrs:{id:"an-example-of-perspective-projection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#an-example-of-perspective-projection"}},[t._v("#")]),t._v(" An Example of Perspective Projection")]),t._v(" "),e("p",[e("strong",[t._v("After perspective projection")])]),t._v(" "),e("ul",[e("li",[t._v("Frustum 내에 있는 객체들이 canonical 공간에 비선형적으로 압축됨")]),t._v(" "),e("li",[t._v("카메라에 가까운 객체는 더 크게, 멀리 있는 객체는 더 작게 보임")])]),t._v(" "),e("h2",{attrs:{id:"an-example-of-perspective-projection-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#an-example-of-perspective-projection-2"}},[t._v("#")]),t._v(" An Example of Perspective Projection")]),t._v(" "),e("ul",[e("li",[t._v("Canonical 공간의 결과를 2D 화면에 표시")]),t._v(" "),e("li",[t._v("수평 방향: 1024px")]),t._v(" "),e("li",[t._v("수직 방향: 768px")]),t._v(" "),e("li",[t._v("카메라의 viewport 내에 객체들이 깊이에 따라 달리 표현됨")])]),t._v(" "),e("h2",{attrs:{id:"let-s-first-consider-3d-view-frustum-→-2d-projection-plane"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#let-s-first-consider-3d-view-frustum-→-2d-projection-plane"}},[t._v("#")]),t._v(" Let's first consider 3D View Frustum → 2D Projection Plane")]),t._v(" "),e("ul",[e("li",[t._v("3D 점을 카메라 평면에 투영하는 과정을 고려해보자")])]),t._v(" "),e("h2",{attrs:{id:"perspective-projection-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#perspective-projection-2"}},[t._v("#")]),t._v(" Perspective projection")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("화면 위의 객체 크기는 "),e("strong",[t._v("카메라로부터의 거리")]),t._v("에 반비례함")])]),t._v(" "),e("li",[e("p",[t._v("유사한 삼각형의 성질:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("y' / d = y / -z\n⇒ y' = -d·y / z\n")])])])])]),t._v(" "),e("h2",{attrs:{id:"homogeneous-coordinates-revisited"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#homogeneous-coordinates-revisited"}},[t._v("#")]),t._v(" Homogeneous coordinates revisited")]),t._v(" "),e("ul",[e("li",[t._v("Perspective는 나눗셈 연산이 필요함\n"),e("ul",[e("li",[t._v("이는 "),e("strong",[t._v("Affine transformation에는 포함되지 않음")])])])]),t._v(" "),e("li",[t._v("Affine에서는 평행선이 평행하게 유지됨\n"),e("ul",[e("li",[t._v("따라서 소실점 없음")]),t._v(" "),e("li",[t._v("뷰포인트로 수렴하는 광선도 없음")])])]),t._v(" "),e("li",[e("strong",[t._v("Homogeneous coordinates의 본래 목적은 투영 구현")]),t._v("에 있음")])]),t._v(" "),e("h2",{attrs:{id:"homogeneous-coordinates-revisited-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#homogeneous-coordinates-revisited-2"}},[t._v("#")]),t._v(" Homogeneous coordinates revisited")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("w = 1")]),t._v(" 좌표를 자리 표시자로 도입\n"),e("ul",[e("li",[t._v("translation을 선형 변환과 통합하는 데 편리")])])]),t._v(" "),e("li",[t._v("임의의 w도 허용 가능:"),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[x  ]      [kx  ]\n[y  ]  ~   [ky  ]\n[z  ]      [kz  ]\n[w  ]      [kw  ]\n")])])]),e("ul",[e("li",[t._v("4D 벡터의 "),e("strong",[t._v("스칼라 배수는 동일한 좌표로 간주")])])])])]),t._v(" "),e("h2",{attrs:{id:"perspective-projection-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#perspective-projection-3"}},[t._v("#")]),t._v(" Perspective projection")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("투영 평면에 투영하려면, z를 w로 옮겨서 다음과 같이 변환:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[x']   = [-d·x/z]     [dz  0   0   0 ]   [x]\n[y']     [-d·y/z]  =  [0  dz   0   0 ] * [y]\n[ 1 ]     [   1 ]     [0   0   0  -1 ]   [z]\n                       [0   0   1   0 ]   [1]\n")])])])])]),t._v(" "),e("h2",{attrs:{id:"so-far-3d-→-2d"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#so-far-3d-→-2d"}},[t._v("#")]),t._v(" So far, 3D → 2D")]),t._v(" "),e("ul",[e("li",[t._v("지금까지는 단지"),e("br"),t._v(" "),e("strong",[t._v("3D View Frustum → 2D Projection Plane")]),e("br"),t._v("\n로의 투영 이야기였음")])]),t._v(" "),e("h2",{attrs:{id:"now-3d-→-3d"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#now-3d-→-3d"}},[t._v("#")]),t._v(" Now, 3D → 3D")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("그러나 실제로 우리가 구현해야 하는 것은"),e("br"),t._v(" "),e("strong",[t._v("3D View Frustum → 3D Canonical View Volume")])])]),t._v(" "),e("li",[e("p",[t._v("즉, 원근 투영 이후에도 (x', y', z') 좌표는 유지되어야 함"),e("br"),t._v("\n→ clip space의 깊이 정보가 필요")])])]),t._v(" "),e("h2",{attrs:{id:"first-3d-view-frustum-→-3d-cuboid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#first-3d-view-frustum-→-3d-cuboid"}},[t._v("#")]),t._v(" First, 3D View Frustum → 3D Cuboid")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("우선은 canonical volume이 아닌, near/far 평면이 같은 위치의 cuboid를 고려")])]),t._v(" "),e("li",[e("p",[t._v("x, y 좌표에 대해 이전 슬라이드와 같은 방식으로 투영 가능:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("y' = -d·y / z\nx' = -d·x / z\n")])])])]),t._v(" "),e("li",[e("p",[t._v("near/far offset이 동일한 cuboid를 고려")])]),t._v(" "),e("li",[e("p",[t._v("문제는 z 좌표:")]),t._v(" "),e("ul",[e("li",[t._v("깊이 z는 보존되지 않음 (z가 나눗셈 연산 포함 → 비선형)")]),t._v(" "),e("li",[t._v("해결: z 값을 적절히 매핑하여 near/far 평면의 깊이 정보를 유지")])])])]),t._v(" "),e("h2",{attrs:{id:"_3d-view-frustum-→-3d-cuboid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3d-view-frustum-→-3d-cuboid"}},[t._v("#")]),t._v(" 3D View Frustum → 3D Cuboid")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("z 값까지 포함하여 전체를 행렬로 표현:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[x']   = [-dx/z]       [dz  0   0   0 ]   [x]\n[y']     [-dy/z]   =   [0  dz   0   0 ] * [y]\n[z']     [-X/z ]       [0   0   a   b ]   [z]\n[ 1 ]     [  1 ]       [0   0  -1   0 ]   [1]\n")])])])]),t._v(" "),e("li",[e("p",[t._v("x, y에는 영향 없음 → z'는 x, y와 무관")]),t._v(" "),e("ul",[e("li",[t._v("따라서 c₀ = c₁ = 0")])])]),t._v(" "),e("li",[e("p",[t._v("원하는 조건:")]),t._v(" "),e("ul",[e("li",[t._v("z'(-n) = n")]),t._v(" "),e("li",[t._v("z'(-f) = f")])])]),t._v(" "),e("li",[e("p",[t._v("선형식으로 z' 정의: "),e("code",[t._v("z'(z) = (a·z + b) / -z")])])]),t._v(" "),e("li",[e("p",[t._v("두 개의 미지수 a, b를 두 조건에 대입해 해 구함")]),t._v(" "),e("ul",[e("li",[t._v("해: "),e("code",[t._v("a = fn")]),t._v(", "),e("code",[t._v("b = f + n")])])])])]),t._v(" "),e("h2",{attrs:{id:"final-3d-view-frustum-→-3d-canonical-view-volume"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#final-3d-view-frustum-→-3d-canonical-view-volume"}},[t._v("#")]),t._v(" Final: 3D View Frustum → 3D Canonical View Volume")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("P_pers = P_orth · P_dc")])]),t._v(" "),e("li",[t._v("P_dc 행렬 (near, far 반영):"),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[n   0   0   0]\n[0   n   0   0]\n[0   0  f+n fn]\n[0   0  -1   0]\n")])])])]),t._v(" "),e("li",[t._v("frustum → cuboid → canonical volume 으로 변환")])]),t._v(" "),e("h2",{attrs:{id:"perspective-projection-matrix"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#perspective-projection-matrix"}},[t._v("#")]),t._v(" Perspective Projection Matrix")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("최종 perspective projection 행렬:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("P_pers = P_orth · P_dc =\n\n[n/r  0     0         0   ]\n[0    n/t   0         0   ]\n[0    0   (f+n)/(n-f) fnf/(n-f)]\n[0    0    -1         0   ]\n")])])])])]),t._v(" "),e("h2",{attrs:{id:"note-on-mapped-depth-z-value"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#note-on-mapped-depth-z-value"}},[t._v("#")]),t._v(" Note on Mapped Depth (Z' value)")]),t._v(" "),e("ul",[e("li",[t._v("Perspective projection은 깊이 z 값을 (-1, +1) 범위로 "),e("strong",[t._v("비선형 매핑")])]),t._v(" "),e("li",[t._v("결과:\n"),e("ul",[e("li",[t._v("카메라 가까이의 z 값일수록 정밀도가 높음")]),t._v(" "),e("li",[t._v("멀수록 정밀도가 낮아짐")])])]),t._v(" "),e("li",[t._v("그래프:\n"),e("ul",[e("li",[t._v("X축: z 값 (원래 깊이)")]),t._v(" "),e("li",[t._v("Y축: 매핑된 z' 값")])])])]),t._v(" "),e("h2",{attrs:{id:"perspective-division-clip-ndc-space"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#perspective-division-clip-ndc-space"}},[t._v("#")]),t._v(" Perspective Division, Clip / NDC Space")]),t._v(" "),e("ul",[e("li",[t._v("clip space: shader 이후 장면 표현 (4D homogeneous)")]),t._v(" "),e("li",[t._v("NDC space: perspective division 이후의 3D 좌표계\n"),e("ul",[e("li",[t._v("w로 나눠서 [x/w, y/w, z/w] 형태로 변환됨")])])]),t._v(" "),e("li",[t._v("실제 표현되는 범위: [-1, 1]")])]),t._v(" "),e("h2",{attrs:{id:"demo-perspective-projection-frustum"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#demo-perspective-projection-frustum"}},[t._v("#")]),t._v(" [Demo] Perspective Projection - frustum")]),t._v(" "),e("ul",[e("li",[t._v("웹 데모: https://learnwebgl.brown37.net/08_projections/create_frustum/create_frustum.html")]),t._v(" "),e("li",[t._v("슬라이더로 left, right, top, near, far 값을 조절하며 변화 확인")])]),t._v(" "),e("h2",{attrs:{id:"demo-perspective-projection-perspective"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#demo-perspective-projection-perspective"}},[t._v("#")]),t._v(" [Demo] Perspective Projection - perspective")]),t._v(" "),e("ul",[e("li",[t._v("웹 데모: https://learnwebgl.brown37.net/08_projections/create_perspective/create_perspective.html")]),t._v(" "),e("li",[t._v("슬라이더를 이용해 "),e("code",[t._v("fovy")]),t._v(", "),e("code",[t._v("aspect")]),t._v(", "),e("code",[t._v("near")]),t._v(", "),e("code",[t._v("far")]),t._v(" 조절")]),t._v(" "),e("li",[e("strong",[t._v("frustum")]),t._v("과 "),e("strong",[t._v("perspective")]),t._v(" 중 어떤 것이 더 편리한가?")])]),t._v(" "),e("h2",{attrs:{id:"quiz-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#quiz-2"}},[t._v("#")]),t._v(" Quiz 2")]),t._v(" "),e("h1",{attrs:{id:"viewport-transformation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#viewport-transformation"}},[t._v("#")]),t._v(" Viewport Transformation")]),t._v(" "),e("h2",{attrs:{id:"viewport-transformation-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#viewport-transformation-2"}},[t._v("#")]),t._v(" Viewport Transformation")]),t._v(" "),e("ul",[e("li",[t._v("Viewport transformation은 NDC 공간에서 화면 공간(screen space)으로 변환")]),t._v(" "),e("li",[t._v("마지막 단계의 변환: clip space → screen space")]),t._v(" "),e("li",[t._v("좌표계 범위:\n"),e("ul",[e("li",[t._v("NDC: (-1, -1, -1) ~ (1, 1, 1)")]),t._v(" "),e("li",[t._v("Screen: (0, 0, 0) ~ (width, height, 1)")])])])]),t._v(" "),e("h2",{attrs:{id:"recall-that-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#recall-that-2"}},[t._v("#")]),t._v(" Recall that...")]),t._v(" "),e("ul",[e("li",[e("ol",[e("li",[t._v("객체 배치\n→ Modeling transformation")])])]),t._v(" "),e("li",[e("ol",{attrs:{start:"2"}},[e("li",[t._v("카메라 배치\n→ Viewing transformation")])])]),t._v(" "),e("li",[e("ol",{attrs:{start:"3"}},[e("li",[t._v("렌즈 설정\n→ Projection transformation")])])]),t._v(" "),e("li",[e("ol",{attrs:{start:"4"}},[e("li",[e("strong",[t._v('"스크린에 출력"')]),t._v("\n→ "),e("strong",[t._v("Viewport transformation")])])])])]),t._v(" "),e("h2",{attrs:{id:"viewport-transformation-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#viewport-transformation-3"}},[t._v("#")]),t._v(" Viewport Transformation")]),t._v(" "),e("ul",[e("li",[t._v("Canonical view volume (NDC)에서 z방향 +를 기준으로 내려다본다고 가정")]),t._v(" "),e("li",[t._v("Viewport는 screen 상의 사각형 영역")]),t._v(" "),e("li",[t._v("Viewport transformation도 결국 "),e("strong",[t._v("windowing transformation")]),t._v("의 일종")]),t._v(" "),e("li",[t._v("깊이 값(z)은 [0, 1] 범위로 재매핑됨 (default depth buffer)")])]),t._v(" "),e("h2",{attrs:{id:"viewport-transformation-matrix"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#viewport-transformation-matrix"}},[t._v("#")]),t._v(" Viewport Transformation Matrix")]),t._v(" "),e("ul",[e("li",[t._v("windowing transformation matrix에서,\n"),e("ul",[e("li",[e("code",[t._v("x_p, x_l, x_h ...")]),t._v(" 대신 viewport 변수 대입")])])]),t._v(" "),e("li",[t._v("변환 행렬:"),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("T_vp =\n[ width/2     0          0    width/2 + x_min ]\n[   0       height/2     0    height/2 + y_min]\n[   0          0       1/2         1/2       ]\n[   0          0         0           1       ]\n")])])])]),t._v(" "),e("li",[e("code",[t._v("(x_min, y_min)")]),t._v("부터 시작하여 "),e("code",[t._v("(width, height)")]),t._v(" 크기 화면 좌표로 이동")])])])}),[],!1,null,null,null);e.default=i.exports}}]);